@page "/setpassword"
@layout LoginLayout


@if (_showError)
{
	<div class="alert alert-danger" role="alert">
		@foreach (var error in _errors)
		{
			<p>@error</p>
		}
	</div>
}

@if (_showSuccess)
{
    <MudPaper Elevation=0 Class="d-flex flex-column justify-center gap-4">
         <MudPaper Elevation=0 Class="d-flex justify-center">
            <MudText  Typo="Typo.h6">Аккаунт готов к работе!</MudText> 
         </MudPaper>
         
        <MudButton Class="d-flex" Variant="Variant.Filled"  OnClick="Authorize" Color="Color.Primary" Size="Size.Large" FullWidth="true">Авторизоваться</MudButton>
    </MudPaper>

}


@if (!_showSuccess)
{
    <EditForm Model="@_resetPassDto" OnValidSubmit="Submit">

        <MudGrid>
            <MudItem xs="12">
                <div class="d-flex justify-center">
                    <MudIcon Icon="@Icons.Filled.LockReset" Color="Color.Primary" Size="Size.Large"  Style="width: 100px; height: 100px;" />
                </div>
            </MudItem>
            <MudItem xs="12">
                <div class="d-flex justify-center">
                    <MudText Typo="Typo.h4">Установить пароль</MudText>
                </div>
            </MudItem>
            @* <MudItem xs="12">
                <div class="d-flex justify-center">
                    <MudText Typo="Typo.subtitle2" Class="mb-n4">@_localizer["Enter email for password reset"]</MudText>
                </div>
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="@_localizer["E-mail"]" @bind-Value="_resetPasswordModel.Email" For="@(() => _resetPasswordModel.Email)" Variant="Variant.Outlined" />
            </MudItem> *@
            <MudItem xs="12">
                <MudTextField T="string" Label="Пароль" @bind-Value="_resetPassDto.Password" For="@(() => _resetPassDto.Password)" Variant="Variant.Outlined" InputType="@_passwordInput" Adornment="Adornment.End" AdornmentIcon="@_passwordInputIcon" OnAdornmentClick="TogglePasswordVisibility" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Подтверждение пароля" @bind-Value="_resetPassDto.ConfirmPassword" For="@(() => _resetPassDto.ConfirmPassword)" Variant="Variant.Outlined" InputType="InputType.Password" />
            </MudItem>
            <MudItem xs="12" Class="d-flex justify-center">
                <MudButton Variant="Variant.Filled"  Color="Color.Primary" ButtonType="ButtonType.Submit" Size="Size.Large" FullWidth="true">Установить пароль</MudButton>
            </MudItem>
        </MudGrid>
    </EditForm>
}