<style>
    div.mud-layout.mud-drawer-open-responsive-md-left.mud-drawer-left-clipped-never > div > div > div > div > div:nth-child(3) > form > div > div:nth-child(3) > div > div:nth-child(1) > div:nth-child(2) > div > div > div.mud-input-control-helper-container > p,
    div.mud-layout.mud-drawer-open-responsive-md-left.mud-drawer-left-clipped-never > div > div > div > div > div:nth-child(3) > form > div > div:nth-child(3) > div > div:nth-child(2) > div:nth-child(2) > div > div > div.mud-input-control-helper-container > p,
    div.mud-layout.mud-drawer-open-responsive-md-left.mud-drawer-left-clipped-never > div > div > div > div > div:nth-child(3) > form > div > div:nth-child(4) > div > div.mud-paper.mud-elevation-0.d-flex.flex-column.pb-4 > div:nth-child(2) > div > div > div.mud-input-control-helper-container > p,
    div.mud-layout.mud-drawer-open-responsive-md-left.mud-drawer-left-clipped-never > div > div > div > div > div:nth-child(3) > form > div > div:nth-child(4) > div > div:nth-child(2) > div:nth-child(2) > div > div > div.mud-input-control-helper-container > p,
    div.mud-layout.mud-drawer-open-responsive-md-left.mud-drawer-left-clipped-never > div > div > div > div > div:nth-child(3) > form > div > div:nth-child(4) > div > div:nth-child(2) > div:nth-child(2) > div > div > div.mud-input-control-helper-container > p,
    div.mud-layout.mud-drawer-open-responsive-md-left.mud-drawer-left-clipped-never > div > div > div > div > div:nth-child(3) > form > div > div:nth-child(4) > div > div:nth-child(2) > div:nth-child(2) > div > div > div.mud-input-control-helper-container > p > div > div > p,
    div.mud-layout.mud-drawer-open-responsive-md-left.mud-drawer-left-clipped-never > div > div > div > div > div:nth-child(3) > form > div > div:nth-child(5) > div > div > div:nth-child(2) > div > div > div.mud-input-control-helper-container > p > div
    {
        margin-top: 20px;
    }
</style>

@page "/request/{Id:guid}"

@using Entities.Models;
@if(_request != null)
{   

<MudGrid>
    <MudPaper  MinWidth=500px Elevation=0 Class="d-flex flex-column align-center justify-center gap-4 mud-width-full grey lighten-5 mb-4" >
          
             <MudPaper 
                Elevation=0 MinWidth=500px MaxWidth=45%
                 Class="d-flex mud-width-full justify-start mt-10 flex-column gap-4"
                  Style="@($"border:1px solid {Colors.BlueGrey.Lighten5};")">
                <MudPaper Elevation=0 Class="d-flex  mud-width-full justify-space-between align-center">
                    <MudText Class="d-flex  ml-4 " Typo="Typo.h5">Данные заявки</MudText>
                    <MudPaper Elevation=0 Class="d-flex mt-6 gap-4 mr-4">
                        <MudButton 
                            OnClick="@Update" 
                            Variant="Variant.Outlined" 
                            Color="Color.Primary">Сохранить
                        </MudButton>
                        <AuthorizeView Roles="Administrator">
                            <Authorized>
                                <MudButton 
                                    OnClick="@GenerateRequest" 
                                    EndIcon="@Icons.Material.Filled.Send" 
                                    Variant="Variant.Filled" 
                                    Color="Color.Primary">Отправить
                                </MudButton> 
                            </Authorized>
                        </AuthorizeView>
                        <AuthorizeView Roles="User">
                            <Authorized>
                                <MudButton 
                                    OnClick="@RequestComplited" 
                                    EndIcon="@Icons.Material.Filled.Send" 
                                    Variant="Variant.Filled" 
                                    Color="Color.Primary">На проверку
                                </MudButton> 
                            </Authorized>
                        </AuthorizeView>
                        
                    </MudPaper>
                    
                </MudPaper>
                
                    @if (_request.IsJuridical)
                    {
                        <MudPaper Elevation=0 Class="d-flex  mud-width-full justify-start align-center">
                            <MudText Class="d-flex pl-4  " >Организация: </MudText> 
                            <MudChip Class="d-flex" Disabled="true" Color="Color.Default">@_request.ShortName</MudChip> 
                        </MudPaper>
                        <MudPaper Elevation=0 Class="d-flex  mud-width-full justify-start align-center">
                            <MudText Class="d-flex pl-4 " >ИНН:</MudText>
                            <MudChip Class="d-flex" Disabled="true" Color="Color.Default">@_request.Inn</MudChip>
                        </MudPaper>
                    }
                    else if (!_request.IsJuridical)
                    {
                        <MudPaper Elevation=0 Class="d-flex  mud-width-full justify-start align-center">
                            <MudText Class="d-flex pl-4  " >Физическое лицо:</MudText> 
                            <MudChip Class="d-flex" Disabled="true" Color="Color.Default"> @_request.PersonLastName @_request.PersonFirstName @_request.PersonPatronymic</MudChip> 
                        </MudPaper>
                        <MudPaper Elevation=0 Class="d-flex  mud-width-full justify-start align-center">
                            <MudText Class="d-flex pl-4 " >Email: </MudText>
                            <MudChip Class="d-flex" Disabled="true" Color="Color.Default">@_request.PersonEmail</MudChip>
                        </MudPaper>
                    }
                    
                    <MudPaper Elevation=0 Class="d-flex  mud-width-full justify-start align-center">
                        <MudText Class="d-flex pl-4  mb-4 " >Криптопровайдер: </MudText>
                        <MudChip Class="d-flex mb-4" Disabled="true" Color="Color.Default">@providerRuName</MudChip>
                    </MudPaper>
                </MudPaper>
            <MudPaper 
                Elevation=0 MinWidth=500px MaxWidth=45%
                 Class="d-flex mud-width-full justify-center "
                  Style="@($"border:1px solid {Colors.BlueGrey.Lighten5};")">
                <MudForm @ref="form" @bind-IsValid="@dataSuccess">
                    <MudCardContent Class="mud-width-full">
                        <MudText>Данные владельца ЭП</MudText>
                        <MudGrid>
                            <MudItem xs="12" Class="d-flex align-stretch gap-4" >
                                <MudTextField 
                                    RequiredError="Поле на заполнено" Required=true
                                    @bind-Value="_request.PersonLastName"  
                                    Label="Фамилия" 
                                    Variant="Variant.Outlined" 
                                    Margin="Margin.Normal" >
                                </MudTextField>
                                <MudTextField 
                                    RequiredError="Поле на заполнено" Required=true 
                                    @bind-Value="_request.PersonFirstName" 
                                    Label="Имя" Variant="Variant.Outlined" 
                                    Margin="Margin.Normal">
                                </MudTextField>
                                <MudTextField 
                                    @bind-Value="_request.PersonPatronymic" 
                                    Label="Отчество" Variant="Variant.Outlined" 
                                    Margin="Margin.Normal">
                                </MudTextField>
                            </MudItem>
                        </MudGrid>
                        <MudGrid>
                            <MudItem xs="12" Class="d-flex justify-space-between gap-4" >
                                <MudPaper Elevation=0 MaxWidth=45% Class="d-flex mud-width-full" >
                                    <MudAutocomplete 
                                        Variant="Variant.Outlined"
                                        RequiredError="Поле на заполнено" Required=true
                                        T="Country" 
                                        Label="Гражданство"
                                        Clearable=true 
                                        Value="CyrrentCountry" 
                                        ValueChanged="@CountryChanged"
                                        SearchFunc="@SearchCountry" 
                                        ToStringFunc="@(state => state.CountryName)">
                                    </MudAutocomplete>
                                </MudPaper>
                                
                                <MudPaper MaxWidth=50% Elevation=0  Class="d-flex align-center ">
                                    <MudText Class="pr-4">Пол:</MudText>
                                    <MudForm Class="d-flex align-center">
                                        <MudRadioGroup 
                                            @bind-SelectedOption="_request.PersonGender"
                                            Class="d-flex" 
                                            T="int?"
                                            Required=true
                                            RequiredError="Укажите пол"
                                            >
                                            <MudRadio T="int?" Option="@(1)" Color="Color.Primary">Муж</MudRadio>
                                            <MudRadio T="int?" Option="@(2)" Color="Color.Primary">Жен</MudRadio>
                                        </MudRadioGroup>
                                    </MudForm>
                                </MudPaper>
                            </MudItem>
                        </MudGrid>
                        <MudGrid>
                            <MudItem xs="12" Class="d-flex align-start gap-4" >
                                <MudTextField 
                                    RequiredError="Поле на заполнено" Required=true
                                    @bind-Value="_request.PersonPassportSeries"  
                                    Label="Серия" 
                                    Variant="Variant.Outlined" 
                                    Margin="Margin.Normal"
                                    Mask="@(new PatternMask("00 00"))" >
                                </MudTextField>
                                <MudTextField 
                                    RequiredError="Поле на заполнено" Required=true 
                                    @bind-Value="_request.PersonPassportNumber" 
                                    Label="Номер" 
                                    Variant="Variant.Outlined" 
                                    Margin="Margin.Normal"
                                    Mask="@(new PatternMask("000 000"))">
                                </MudTextField>
                                <MudDatePicker Class="d-flex mt-2" Style="margin-top:2px"
                                    RequiredError="Поле на заполнено" Required=true 
                                    Variant="Variant.Outlined" 
                                    Label="Дата выдачи" 
                                    Editable="true" 
                                    Date="PassportDate" 
                                    DateChanged="PassportDateChanged"
                                    Mask="@(new DateMask("dd.MM.yyyy"))" 
                                    DateFormat="dd.MM.yyyy"
                                    />
                            </MudItem>
                        </MudGrid>
                        <MudGrid>
                            <MudItem xs="12" Class="d-flex align-stretch gap-4" >
                                <MudPaper Elevation=0 Class="d-flex mud-width-full">
                                    <MudTextField  
                                    RequiredError="Поле на заполнено" Required=true
                                    @bind-Value="_request.PersonPassportAddon"  
                                    Label="Кем выдан" 
                                    Variant="Variant.Outlined" 
                                    Margin="Margin.Normal" >
                                </MudTextField>
                                </MudPaper>
                                <MudPaper Elevation=0 MaxWidth=35% MinWidth=200px Class="d-flex mud-width-full">
                                    <MudTextField 
                                        @bind-Value="_request.PersonPassportUnit" 
                                        RequiredError="Поле на заполнено" Required=true
                                        Label="Код подразделения" 
                                        Variant="Variant.Outlined" 
                                        Margin="Margin.Normal"
                                        Mask="@(new PatternMask("000-000"))" >
                                    </MudTextField>
                                </MudPaper>
                            </MudItem>
                        </MudGrid>
                        <MudGrid>
                            <MudItem xs="12" Class="d-flex align-stretch gap-4" >
                                <MudPaper Elevation=0 Class="d-flex mud-width-full">
                                    <MudTextField  
                                    RequiredError="Поле на заполнено" Required=true
                                    @bind-Value="_request.PersonBirthPlace"  
                                    Label="Место рождения" 
                                    Variant="Variant.Outlined" 
                                    Margin="Margin.Normal" >
                                </MudTextField>
                                </MudPaper>
                                <MudPaper Elevation=0 MaxWidth=35% MinWidth=200px Class="d-flex mud-width-full">
                                    <MudDatePicker Class="d-flex mt-2" Style="margin-top:2px"
                                        RequiredError="Поле на заполнено" Required=true 
                                        Variant="Variant.Outlined" 
                                        Label="Дата рождения" 
                                        Editable="true" 
                                        Date="BirthDate" 
                                        DateChanged="BirthDateChanged"
                                        Mask="@(new DateMask("dd.MM.yyyy"))" 
                                        DateFormat="dd.MM.yyyy"
                                        />
                                </MudPaper>
                            </MudItem>
                        </MudGrid>
                        <MudGrid>
                            <MudItem xs="12" Class="d-flex align-stretch gap-4" >
                                <MudPaper Elevation=0 Class="d-flex mud-width-full">
                                    <MudTextField  
                                    RequiredError="Поле на заполнено" Required=true
                                    @bind-Value="_request.PersonInn"  
                                    Label="ИНН ФЛ" 
                                    Variant="Variant.Outlined" 
                                    Margin="Margin.Normal" >
                                </MudTextField>
                                </MudPaper>
                                <MudPaper Elevation=0  Class="d-flex mud-width-full">
                                    <MudTextField 
                                        @bind-Value="_request.PersonSnils" 
                                        RequiredError="Поле на заполнено" Required=true
                                        Label="СНИЛС" 
                                        Variant="Variant.Outlined" 
                                        Margin="Margin.Normal"
                                        Mask="@(new PatternMask("000-000-000 00"))" >
                                    </MudTextField>
                                </MudPaper>
                            </MudItem>
                        </MudGrid>
                        <MudGrid>
                            <MudItem xs="12" Class="d-flex align-stretch gap-4" >
                                <MudPaper Elevation=0 Class="d-flex mud-width-full">
                                    <MudTextField  
                                    RequiredError="Поле на заполнено" Required=true
                                    @bind-Value="_request.PersonEmail"  
                                    Label="Email" 
                                    Disabled=true
                                    Variant="Variant.Outlined" 
                                    Margin="Margin.Normal" >
                                </MudTextField>
                                </MudPaper>
                                <MudPaper Elevation=0  Class="d-flex mud-width-full">
                                    <MudTextField 
                                        @bind-Value="_request.Phone" 
                                        RequiredError="Поле на заполнено" Required=true
                                        Label="Мобильный Телефон" 
                                        Variant="Variant.Outlined" 
                                        Margin="Margin.Normal"
                                        Mask="@(new PatternMask("0 (000) 000-00-00"))" >
                                    </MudTextField>
                                </MudPaper>
                            </MudItem>
                        </MudGrid>
                        @if (_request.IsJuridical)
                        {
                            <MudGrid>
                            <MudItem xs="12" Class="d-flex align-stretch gap-4" >
                                <MudPaper Elevation=0 Class="d-flex mud-width-full">
                                    <MudTextField  
                                    RequiredError="Поле на заполнено" Required=true
                                    @bind-Value="_request.PersonPost"  
                                    Label="Должность" 
                                    Variant="Variant.Outlined" 
                                    Margin="Margin.Normal" >
                                </MudTextField>
                                </MudPaper>
                            </MudItem>
                        </MudGrid>
                        }
                    </MudCardContent>
                </MudForm>
            </MudPaper>
            <MudPaper 
                Elevation=0 MinWidth=500px MaxWidth=45%
                 Class="d-flex mud-width-full justify-center "
                  Style="@($"border:1px solid {Colors.BlueGrey.Lighten5};")">
            <MudForm Class="d-flex mud-width-full justify-center " @ref="formdoc" @bind-IsValid="@docSuccess" >
                <MudCardContent Class="mud-width-full">
                    <MudText>Требуемые документы</MudText>
                    <MudText 
                        Class="pt-3"  
                        Style="@($"color:{Colors.BlueGrey.Lighten3};")" 
                        Typo="Typo.body2">
                        Загрузите цветные сканы или фото оригиналов документов
                    </MudText>
                    <MudGrid>
                        <MudItem xs="12" Class="d-flex align-start justify-space-between  gap-4 mt-4" >
                            <MudPaper Elevation=0 Width=48% Class="d-flex flex-column">
                                <MudPaper Elevation=0 Class="d-flex">
                                    <MudText>Паспорт</MudText>
                                    
                                </MudPaper>
                                <MudPaper Elevation=0 Class="d-flex">
                                    <MudStack Style="width: 100%">
                                        <MudFileUpload @ref="passportValidation" Accept=".pdf, .png"   
                                                        T="IReadOnlyList<IBrowserFile>" 
                                                        OnFilesChanged="OnInputFileChanged" 
                                                        Validation="@(new Func<IReadOnlyList<IBrowserFile>, string>(ValidationPass))"
                                                        Hidden="false" 
                                                        Class="flex-1" 
                                                        InputClass="absolute mud-width-full mud-height-full overflow-hidden z-20" 
                                                        InputStyle="opacity:0"
                                                    @ondragenter="@SetDragClass" @ondragleave="@ClearDragClass" @ondragend="@ClearDragClass">
                                            <ButtonTemplate>
                                                <MudPaper Elevation=0  MinHeight=130px Outlined="true" Class="@DragClass">
                                                    <MudText Class="z-30" >Загрузить файл</MudText>
                                                    @foreach (var file in fileNames)
                                                    {   <MudPaper  Elevation=0 Class="d-flex gap-4 mt-4" >
                                                            <MudPaper Elevation=0 MinWidth=70%>
                                                                <MudChip Color="Color.Dark" Text="@file" />
                                                            </MudPaper>
                                                            <MudPaper Elevation=0 MinWidth=20%>
                                                                <MudFab Class="d-flex z-30" OnClick="@Clear" Color="Color.Primary" StartIcon="@Icons.Filled.DeleteOutline"  Size="Size.Small" />
                                                            </MudPaper>
                                                        </MudPaper>  
                                                    }
                                                </MudPaper>
                                            </ButtonTemplate>
                                        </MudFileUpload>
                                        
                                    </MudStack>
                                </MudPaper>
                            </MudPaper>
                            <MudPaper Elevation=0 Width=48% Class="d-flex flex-column">
                                <MudPaper Elevation=0 Class="d-flex">
                                    <MudText>СНИЛС</MudText>
                                </MudPaper>
                                <MudPaper Elevation=0 Class="d-flex">
                                    <MudStack Style="width: 100%">
                                        <MudFileUpload @ref="snilsValidation" T="IReadOnlyList<IBrowserFile>" OnFilesChanged="OnInputFileChangedSnils" Hidden="false" 
                                                        Accept=".pdf, .png" 
                                                        Class="flex-1" 
                                                        Validation="@(new Func<IReadOnlyList<IBrowserFile>, string>(ValidationSnils))"
                                                        InputClass="absolute mud-width-full mud-height-full overflow-hidden z-20" 
                                                        InputStyle="opacity:0"
                                                    @ondragenter="@SetDragClassSnils" @ondragleave="@ClearDragClassSnils" @ondragend="@ClearDragClassSnils">
                                            <ButtonTemplate>
                                                <MudPaper Elevation=0  MinHeight=130px Outlined="true" Class="@DragClass">
                                                    <MudText Class="z-30" >Загрузить файл</MudText>
                                                    @foreach (var file in fileNamesSnils)
                                                    {   <MudPaper  Elevation=0 Class="d-flex gap-4 mt-4" >
                                                            <MudPaper Elevation=0 MinWidth=70%>
                                                                <MudChip Color="Color.Dark" Text="@file" />
                                                            </MudPaper>
                                                            <MudPaper Elevation=0 MinWidth=20%>
                                                                <MudFab Class="d-flex z-30" OnClick="@ClearSnils" Color="Color.Primary" StartIcon="@Icons.Filled.DeleteOutline"  Size="Size.Small" />
                                                            </MudPaper>
                                                        </MudPaper>  
                                                    }
                                                </MudPaper>
                                            </ButtonTemplate>
                                        </MudFileUpload>
                                        
                                    </MudStack>
                                </MudPaper>
                            </MudPaper>
                            
                        </MudItem>
                    </MudGrid>
                     <MudGrid>
                        <MudItem xs="12" Class="d-flex align-start justify-space-between  gap-4 mt-4" >
                            <MudPaper Elevation=0 Width=48% Class="d-flex flex-column pb-4">
                                <MudPaper Elevation=0 Class="d-flex justify-space-between align-center">
                                    <MudText>Заявление</MudText>
                                    <MudFab Class="d-flex " OnClick="@ClaimPrint" Color="Color.Primary" StartIcon="@Icons.Filled.Print"  Size="Size.Small" />
                                </MudPaper>
                                <MudPaper Elevation=0 Class="d-flex">
                                    <MudStack Style="width: 100%">
                                        <MudFileUpload @ref="claimValidation" T="IReadOnlyList<IBrowserFile>" OnFilesChanged="OnInputFileChangedClaim" Hidden="false" 
                                                        Accept=".pdf, .png" 
                                                        Class="flex-1" 
                                                        Validation="@(new Func<IReadOnlyList<IBrowserFile>, string>(ValidationClaim))"
                                                        InputClass="absolute mud-width-full mud-height-full overflow-hidden z-20" 
                                                        InputStyle="opacity:0"
                                                    @ondragenter="@SetDragClassClaim" @ondragleave="@ClearDragClassClaim" @ondragend="@ClearDragClassClaim">
                                            <ButtonTemplate>
                                                <MudPaper Elevation=0  MinHeight=130px Outlined="true" Class="@DragClass">
                                                    <MudText Class="z-30" >Загрузить файл</MudText>
                                                    @foreach (var file in fileNamesClaim)
                                                    {   <MudPaper  Elevation=0 Class="d-flex gap-4 mt-4" >
                                                            <MudPaper Elevation=0 MinWidth=70%>
                                                                <MudChip Color="Color.Dark" Text="@file" />
                                                            </MudPaper>
                                                            <MudPaper Elevation=0 MinWidth=20%>
                                                                <MudFab Class="d-flex z-30" OnClick="@ClearClaim" Color="Color.Primary" StartIcon="@Icons.Filled.DeleteOutline"  Size="Size.Small" />
                                                            </MudPaper>
                                                        </MudPaper>  
                                                    }
                                                </MudPaper>
                                            </ButtonTemplate>
                                        </MudFileUpload>
                                        
                                    </MudStack>
                                </MudPaper>
                            </MudPaper>
                            <AuthorizeView Roles="Administrator">
                                <Authorized>
                                    <MudPaper Elevation=0 Width=48% Class="d-flex flex-column">
                                    <MudPaper Elevation=0 Class="d-flex justify-space-between align-center">
                                        <MudText>Фото владельца</MudText>
                                        <MudTooltip Text="Приложите Селфи с Паспортом владельца">
                                            <MudFab Class="d-flex z-30"  Color="Color.Primary" StartIcon="@Icons.Filled.QuestionMark"  Size="Size.Small" />
                                        </MudTooltip>
                                        
                                    </MudPaper>
                                    <MudPaper Elevation=0 Class="d-flex">
                                        <MudStack Style="width: 100%">
                                            <MudFileUpload @ref="selfiValidation" T="IReadOnlyList<IBrowserFile>" OnFilesChanged="OnInputFileChangedSelfi" Hidden="false" 
                                                            Accept=".pdf, .png" 
                                                            Class="flex-1" 
                                                            Validation="@(new Func<IReadOnlyList<IBrowserFile>, string>(ValidationSelfi))"
                                                            InputClass="absolute mud-width-full mud-height-full overflow-hidden z-20" 
                                                            InputStyle="opacity:0"
                                                        @ondragenter="@SetDragClassSelfi" @ondragleave="@ClearDragClassSelfi" @ondragend="@ClearDragClassSelfi">
                                                <ButtonTemplate Context="SlfiContext">
                                                    <MudPaper Elevation=0  MinHeight=130px Outlined="true" Class="@DragClass">
                                                        <MudText Class="z-30" >Загрузить файл</MudText>
                                                        @foreach (var file in fileNamesSelfi)
                                                        {   <MudPaper  Elevation=0 Class="d-flex gap-4 mt-4" >
                                                                <MudPaper Elevation=0 MinWidth=70%>
                                                                    <MudChip Color="Color.Dark" Text="@file" />
                                                                </MudPaper>
                                                                <MudPaper Elevation=0 MinWidth=20%>
                                                                    <MudFab Class="d-flex z-30" OnClick="@ClearSelfi" Color="Color.Primary" StartIcon="@Icons.Filled.DeleteOutline"  Size="Size.Small" />
                                                                </MudPaper>
                                                            </MudPaper>  
                                                        }
                                                    </MudPaper>
                                                </ButtonTemplate>
                                            </MudFileUpload>
                                            
                                        </MudStack>
                                    </MudPaper>
                                </MudPaper>
                                </Authorized>
                            </AuthorizeView>
                            @if (_request.IsJuridical)
                            {
                                <AuthorizeView Roles="User">
                                    <Authorized>
                                        <MudPaper Elevation=0 Width=48% Class="d-flex flex-column">
                                    <MudPaper Elevation=0 Class="d-flex justify-space-between align-center">
                                        <MudText>Доверенность</MudText>
                                        <MudFab Class="d-flex z-30" OnClick="@DoverPrint" Color="Color.Primary" StartIcon="@Icons.Filled.Print"  Size="Size.Small" />
                                    </MudPaper>
                                    <MudPaper Elevation=0 Class="d-flex">
                                        <MudStack Style="width: 100%">
                                            <MudFileUpload @ref="dovValidation" T="IReadOnlyList<IBrowserFile>" OnFilesChanged="OnInputFileChangedDov" Hidden="false" 
                                                            Accept=".pdf, .png" 
                                                            Class="flex-1" 
                                                            Validation="@(new Func<IReadOnlyList<IBrowserFile>, string>(ValidationDov))"
                                                            InputClass="absolute mud-width-full mud-height-full overflow-hidden z-20" 
                                                            InputStyle="opacity:0"
                                                        @ondragenter="@SetDragClassDov" @ondragleave="@ClearDragClassDov" @ondragend="@ClearDragClassDov">
                                                <ButtonTemplate Context="DoverContext">
                                                    <MudPaper Elevation=0  MinHeight=130px Outlined="true" Class="@DragClass">
                                                        <MudText Class="z-30" >Загрузить файл</MudText>
                                                        @foreach (var file in fileNamesDov)
                                                        {   <MudPaper  Elevation=0 Class="d-flex gap-4 mt-4" >
                                                                <MudPaper Elevation=0 MinWidth=70%>
                                                                    <MudChip Color="Color.Dark" Text="@file" />
                                                                </MudPaper>
                                                                <MudPaper Elevation=0 MinWidth=20%>
                                                                    <MudFab Class="d-flex z-30" OnClick="@ClearDov" Color="Color.Primary" StartIcon="@Icons.Filled.DeleteOutline"  Size="Size.Small" />
                                                                </MudPaper>
                                                            </MudPaper>  
                                                        }
                                                    </MudPaper>
                                                </ButtonTemplate>
                                            </MudFileUpload>
                                            
                                        </MudStack>
                                    </MudPaper>
                                </MudPaper>
                                    </Authorized>
                                </AuthorizeView>
                                
                            }

                            
                            
                        </MudItem>
                    </MudGrid>
                    <AuthorizeView Roles="Administrator">
                        <Authorized>
                            <MudGrid>
                        <MudItem xs="12" Class="d-flex align-start justify-space-between  gap-4 mt-4" >
                            
                            @if (_request.IsJuridical)
                            {
                                <MudPaper Elevation=0 Width=48% Class="d-flex flex-column">
                                    <MudPaper Elevation=0 Class="d-flex justify-space-between align-center">
                                        <MudText>Доверенность</MudText>
                                        <MudFab Class="d-flex z-30" OnClick="@DoverPrint" Color="Color.Primary" StartIcon="@Icons.Filled.Print"  Size="Size.Small" />
                                    </MudPaper>
                                    <MudPaper Elevation=0 Class="d-flex">
                                        <MudStack Style="width: 100%">
                                            <MudFileUpload @ref="dovValidation" T="IReadOnlyList<IBrowserFile>" OnFilesChanged="OnInputFileChangedDov" Hidden="false" 
                                                            Accept=".pdf, .png" 
                                                            Class="flex-1" 
                                                            Validation="@(new Func<IReadOnlyList<IBrowserFile>, string>(ValidationDov))"
                                                            InputClass="absolute mud-width-full mud-height-full overflow-hidden z-20" 
                                                            InputStyle="opacity:0"
                                                        @ondragenter="@SetDragClassDov" @ondragleave="@ClearDragClassDov" @ondragend="@ClearDragClassDov">
                                                <ButtonTemplate  Context="DovAdmin">
                                                    <MudPaper Elevation=0  MinHeight=130px Outlined="true" Class="@DragClass">
                                                        <MudText Class="z-30" >Загрузить файл</MudText>
                                                        @foreach (var file in fileNamesDov)
                                                        {   <MudPaper  Elevation=0 Class="d-flex gap-4 mt-4" >
                                                                <MudPaper Elevation=0 MinWidth=70%>
                                                                    <MudChip Color="Color.Dark" Text="@file" />
                                                                </MudPaper>
                                                                <MudPaper Elevation=0 MinWidth=20%>
                                                                    <MudFab Class="d-flex z-30" OnClick="@ClearDov" Color="Color.Primary" StartIcon="@Icons.Filled.DeleteOutline"  Size="Size.Small" />
                                                                </MudPaper>
                                                            </MudPaper>  
                                                        }
                                                    </MudPaper>
                                                </ButtonTemplate>
                                            </MudFileUpload>
                                            
                                        </MudStack>
                                    </MudPaper>
                                </MudPaper>
                            }

                            
                            
                        </MudItem>
                    </MudGrid>
                        </Authorized>
                    </AuthorizeView>
                    
                </MudCardContent>
            </MudForm>
            </MudPaper>
    </MudPaper>
    
</MudGrid>
    



    
    
}

